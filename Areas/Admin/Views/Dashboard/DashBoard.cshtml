@{
    ViewData["title"] = "DashBoard";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
}

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>
        DsshBoard
    </title>
</head>
<body>
    <h3>DashBoard Statistic</h3>
    <div class="row">
        <div class="col-md-3">
            <p> Thống kê sản phẩm</p>
            @ViewBag.CountProduct
        </div>
        <div class="col-md-3">
            <p> Thống kê hóa đơn bán</p>
            @ViewBag.CountCTHDB
        </div>
        <div class="col-md-3">
            <p> Thống kê giỏ hàng</p>
            @ViewBag.CountCTGH
        </div>
    </div>
    <div class="col-md-3">
        <p> Biểu đồ thống kê</p>
        <div id="myfirstchart" style="height:250px;"></div>
    </div>
</body>
@section Scripts {
    <script>
        new Morris.Line({
            // ID of the element in which to draw the chart.
            element: 'myfirstchart',
            // Chart data records -- each entry in this array corresponds to a point on
            // the chart.
            data: [
                { year: '2008', value: 20 },
                { year: '2009', value: 10 },
                { year: '2010', value: 3 },
                { year: '2011', value: 1 },
                { year: '2012', value: 30 },
                { year: '2013', value: 10 },
                { year: '2014', value: 5 }

            ],
            // The name of the data record attribute that contains x-values.
            xkey: 'year',
            // A list of names of data record attributes that contain y-values.
            ykeys: ['value'],
            // Labels for the ykeys -- will be displayed when you hover over the
            // chart.
            labels: ['Value']
        });
    </script>
}
@*  @section Scripts{
        <script>
        $(document).ready(function () {
            $.ajax({
                url: "@Url.Action("GetChartData", "DashBoard")",
                type: "POST",
                dataType: "json",
                success: function (data)  {
                    console.log("abc",data);

                    // Process the retrieved data""
                    var chartData = data.map(function (item) {
                        return {
                            NgayBan: item.NgayBan,
                            SoLuongBan: item.SoLuongBan,
                            TongTien: item.TongTien,
                            LoiNhuan: item.LoiNhuan
                        };
                    });
                    console.log("abc", data);
                    //Chart Morris
                    new Morris.Line({
                        element: 'myfirstChart',
                        data: chartData,
                        xkey: 'NgayBan',
                        xLabelFormat: function (x) {
                            return new Date(x).toLocaleDateString();
                        },
                        ykeys: ['SoLuongBan', 'TongTien', 'LoiNhuan'],
                        labels: ["Số lượng bán ra", "Doanh thu", "Lợi nhuận"]
                    });
                },
                error: function (error) {
                    console.error("Error fetching data: ", error);
                }
            });
        });
        </script>
    } *@
</html>
