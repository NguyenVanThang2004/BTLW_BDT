@* @model IEnumerable<Hang>

<div class="col-lg-3 d-none d-lg-block">
    <a class="btn shadow-none d-flex align-items-center justify-content-between bg-primary text-white w-100" data-toggle="collapse" href="#navbar-vertical" style="height: 65px; margin-top: -1px; padding: 0 30px;">
        <h6 class="m-0">Categories</h6>
        <i class="fa fa-angle-down text-dark"></i>
    </a>
    <nav class="collapse show navbar navbar-vertical navbar-light align-items-start p-0 border border-top-0 border-bottom-0" id="navbar-vertical">
        <div class="navbar-nav w-100 overflow-hidden" style="height: 410px">
            
            @foreach (var item in Model)
            {
                <a asp-controller="Home" asp-action="SanPhamTheoHang" asp-route-mahang="@item.MaHang" class="nav-item nav-link">@item.TenHang</a>
            }

        </div>
    </nav>
</div> *@


@model IEnumerable<Hang>

<div class="col-lg-3 d-none d-lg-block">
    <a class="btn shadow-none d-flex align-items-center justify-content-between bg-primary text-white w-100" data-toggle="collapse" href="#navbar-vertical" style="height: 65px; margin-top: -1px; padding: 0 30px;">
        <h6 class="m-0">Categories</h6>
        <i class="fa fa-angle-down text-dark"></i>
    </a>
    <nav class="collapse show navbar navbar-vertical navbar-light align-items-start p-0 border border-top-0 border-bottom-0" id="navbar-vertical">
        <div class="navbar-nav w-100 overflow-hidden" style="height: 410px">

            @foreach (var item in Model)
            {
                var getUrl = "https://localhost:7244/api/productapi/" + item.MaHang;
                <a style="cursor:pointer" onclick="showProductByCategory('@getUrl')" class="nav-item nav-link">@item.TenHang</a>
            }

        </div>
    </nav>
</div>



<script>
    function showProductByCategory(getUrl) {
        var str = '';
        $.ajax({
            type: 'GET',
            url: getUrl,
            dataType: 'json',
            success: function (data) {
                $.each(data, function (key, val) {
                    var linkImage = "../PhoneImages/Images/" + $.trim(val.anhDaiDien);
                    str += `<div class="col-lg-3 col-md-6 col-sm-12 pb-1">
                                <div class="card product-item border-0 mb-4">
                                    <div class="card-header product-img position-relative overflow-hidden bg-transparent border p-0">
                                        <img class="img-fluid w-100" src="${linkImage}" alt="">
                                    </div>
                                    <div class="card-body border-left border-right text-center p-0 pt-4 pb-3">
                                        <h6 class="text-truncate mb-3">${val.tenSanPham}</h6>
                                        <div class="d-flex justify-content-center">
                                            <h6>${parseFloat(val.donGiaBanRa).toLocaleString()} VNĐ</h6>
                                            <h6 class="text-muted ml-2"><del>${parseFloat(val.donGiaBanGoc).toLocaleString()} VNĐ</del></h6>
                                        </div>
                                    </div>
                                    <div class="card-footer d-flex justify-content-between bg-light border">
                                        <a href="#" class="btn btn-sm text-dark p-0"><i class="fas fa-eye text-primary mr-1"></i>View Detail</a>
                                        <a asp-controller="Cart" asp-action="AddToCart" asp-route-id="${val.maSanPham}" class="btn btn-sm text-dark p-0"><i class="fas fa-shopping-cart text-primary mr-1"></i>Add To Cart</a>
                                    </div>
                                </div>
                            </div>`;
                });

                // Hiển thị sản phẩm vào phần displayProducts
                $('#displayProducts').html(str);

                // Cuộn trang đến phần hiển thị sản phẩm
                var displayProductsSection = document.getElementById("displayProducts");
                displayProductsSection.scrollIntoView({
                    behavior: "smooth",
                    block: "start"
                });
            },
            error: function (xhr) {
                alert(xhr.responseText);
            }
        });
    }

</script>
