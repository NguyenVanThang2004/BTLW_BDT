@model BTLW_BDT.ViewModels.RegisterVM
@{
    ViewData["Title"] = "Register";
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="apple-touch-icon" sizes="76x76" href="../LayoutAdmin/assets/img/apple-icon.png">
    <link rel="icon" type="image/png" href="../LayoutAdmin/assets/img/favicon.png">
    <title>
        Material Dashboard 2 by Creative Tim
    </title>
    <!--     Fonts and icons     -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900|Roboto+Slab:400,700" />
    <!-- Nucleo Icons -->
    <link href="../LayoutAdmin/assets/css/nucleo-icons.css" rel="stylesheet" />
    <link href="../LayoutAdmin/assets/css/nucleo-svg.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Font Awesome Icons -->
    <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <!-- CSS Files -->
    <link id="pagestyle" href="../LayoutAdmin/assets/css/material-dashboard.css?v=3.1.0" rel="stylesheet" />
    <!-- Nepcha Analytics -->
    <script defer data-site="YOUR_DOMAIN_HERE" src="https://api.nepcha.com/js/nepcha-analytics.js"></script>
</head>

<body class="">
    <div class="container position-sticky z-index-sticky top-0">
    </div>
    <main class="main-content mt-0">
        <section>
            <div class="page-header min-vh-100">
                <div class="container">
                    <div class="row">
                        <div class="col-6 d-lg-flex d-none h-100 my-auto pe-0 position-absolute top-0 start-0 text-center justify-content-center flex-column">
                            <div class="position-relative bg-gradient-primary h-100 m-3 px-7 border-radius-lg d-flex flex-column justify-content-center" style="background-image: url('../LayoutAdmin/assets/img/illustrations/illustration-signup.jpg'); background-size: cover;">
                            </div>
                        </div>
                        <div class="col-xl-4 col-lg-5 col-md-7 d-flex flex-column ms-auto me-auto ms-lg-auto me-lg-5">
                            <div class="card card-plain">
                                <div class="card-header">
                                    <h4 class="font-weight-bolder">Sign Up</h4>
                                </div>
                                <div class="card-body">
                                    <form asp-action="Register" enctype="multipart/form-data">
                                        <div class="row">
                                            <div class="row">
                                                <div class="form-item">
                                                    <label asp-for="@Model.TaiKhoan" class="form-label my-3"></label><sup>*</sup>
                                                    <input asp-for="@Model.TaiKhoan" class="form-control">
                                                    <span asp-validation-for="@Model.TaiKhoan" class="text-danger"></span>
                                                </div>
                                                <div class="form-item">
                                                        <label asp-for="@Model.MatKhau" class="form-label my-3"></label><sup>*</sup>
                                                    <input asp-for="@Model.MatKhau" type="password"  class="form-control" />
                                                        <span asp-validation-for="@Model.MatKhau" class="text-danger"></span>
                                                </div>
                                                <div class="form-item">
                                                        <label asp-for="@Model.XacNhanMatKhau" class="form-label my-3"></label><sup>*</sup>
                                                    <input asp-for="@Model.XacNhanMatKhau" type="password" class="form-control" />
                                                        <span asp-validation-for="@Model.XacNhanMatKhau" class="text-danger"></span>
                                                </div>
                                                <div class="form-item">
                                                    <label class="form-label my-3" asp-for="@Model.HoTen"></label><sup>*</sup>
                                                    <input asp-for="@Model.HoTen" type="text" class="form-control" />
                                                    <span asp-validation-for="@Model.HoTen" class="text-danger"></span>
                                                </div>
                                                <div class="form-item">
                                                    <label class="form-label my-3" asp-for="@Model.NgaySinh"></label>
                                                    <input asp-for="@Model.NgaySinh" class=" form-control" />
                                                    <span asp-validation-for="@Model.NgaySinh" class="text-danger"></span>
                                                </div>

                                                <!-- Thêm các dropdown Tỉnh Thành, Quận Huyện, Phường Xã -->
                                                <div class="form-item">
                                                    <label class="form-label my-3">Tỉnh Thành</label><sup>*</sup>
                                                    <select class="css_select" id="tinh" name="tinh" title="Chọn Tỉnh Thành">
                                                        <option value="0">Tỉnh Thành</option>
                                                    </select>
                                                </div>

                                                <div class="form-item">
                                                    <label class="form-label my-3">Quận Huyện</label><sup>*</sup>
                                                    <select class="css_select" id="quan" name="quan" title="Chọn Quận Huyện">
                                                        <option value="0">Quận Huyện</option>
                                                    </select>
                                                </div>

                                                <div class="form-item">
                                                    <label class="form-label my-3">Phường Xã</label><sup>*</sup>
                                                    <select class="css_select" id="phuong" name="phuong" title="Chọn Phường Xã">
                                                        <option value="0">Phường Xã</option>
                                                    </select>
                                                </div>

                                                <!-- Cập nhật trường nhập địa chỉ -->
                                                <div class="form-item">
                                                    <label class="form-label my-3" asp-for="@Model.DiaChi"></label><sup>*</sup>
                                                    <input type="text" id="addressSearch" class="form-control" placeholder="Nhập địa chỉ..." oninput="searchAddress()" asp-for="@Model.DiaChi" />
                                                    <span asp-validation-for="@Model.DiaChi" class="text-danger"></span>
                                                </div>

                                                <!-- Để hiển thị các gợi ý địa chỉ -->
                                                <ul id="addressSuggestions" class="list-group" style="display:none; position: absolute; max-height: 200px; overflow-y: auto;"></ul>

                                                <div class="form-item">
                                                    <label class="form-label my-3" asp-for="@Model.DienThoai"></label><sup>*</sup>
                                                    <input asp-for="@Model.DienThoai" class="form-control" />
                                                    <span asp-validation-for="@Model.DienThoai" class="text-danger"></span>
                                                </div>

                                                <div class="form-item">
                                                    <label class="form-label my-3" asp-for="@Model.Email"></label><sup>*</sup>
                                                    <input asp-for="@Model.Email" type="email" class="form-control" />
                                                    <span asp-validation-for="@Model.Email" class="text-danger"></span>
                                                </div>

                                                <div class="form-item">
                                                    <label class="form-label my-3" for="Hinh">Hình<sup>*</sup></label>
                                                    <input type="file" name="Hinh" class="form-control" />
                                                </div>
                                            </div>

                                            <div class="row g-4 text-center align-items-center justify-content-center pt-4">
                                                <button type="submit" class="btn btn-lg bg-gradient-primary btn-lg w-100 mt-4 mb-0">Đăng ký</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <div class="card-footer text-center pt-0 px-lg-2 px-1">
                                    <p class="mb-2 text-sm mx-auto">
                                        Already have an account?
                                        <a asp-controller="access" asp-action="Login" class="text-primary text-gradient font-weight-bold">Sign in</a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!--   Core JS Files   -->
    <script src="../LayoutAdmin/assets/js/core/popper.min.js"></script>
    <script src="../LayoutAdmin/assets/js/core/bootstrap.min.js"></script>
    <script src="../LayoutAdmin/assets/js/plugins/perfect-scrollbar.min.js"></script>
    <script src="../LayoutAdmin/assets/js/plugins/smooth-scrollbar.min.js"></script>

    <script>
        $(document).ready(function () {
            $(document).ready(function () {
                //Lấy tỉnh thành
                $.getJSON('https://esgoo.net/api-tinhthanh/1/0.htm', function (data_tinh) {
                    if (data_tinh.error == 0) {
                        $.each(data_tinh.data, function (key_tinh, val_tinh) {
                            $("#tinh").append('<option value="' + val_tinh.id + '">' + val_tinh.full_name + '</option>');
                        });
                        $("#tinh").change(function (e) {
                            var idtinh = $(this).val();
                            //Lấy quận huyện
                            $.getJSON('https://esgoo.net/api-tinhthanh/2/' + idtinh + '.htm', function (data_quan) {
                                if (data_quan.error == 0) {
                                    $("#quan").html('<option value="0">Quận Huyện</option>');
                                    $("#phuong").html('<option value="0">Phường Xã</option>');
                                    $.each(data_quan.data, function (key_quan, val_quan) {
                                        $("#quan").append('<option value="' + val_quan.id + '">' + val_quan.full_name + '</option>');
                                    });
                                    //Lấy phường xã
                                    $("#quan").change(function (e) {
                                        var idquan = $(this).val();
                                        $.getJSON('https://esgoo.net/api-tinhthanh/3/' + idquan + '.htm', function (data_phuong) {
                                            if (data_phuong.error == 0) {
                                                $("#phuong").html('<option value="0">Phường Xã</option>');
                                                $.each(data_phuong.data, function (key_phuong, val_phuong) {
                                                    $("#phuong").append('<option value="' + val_phuong.id + '">' + val_phuong.full_name + '</option>');
                                                });
                                            }
                                        });
                                    });

                                }
                            });
                        });

                    }
                });
            });

            // Hàm tìm kiếm địa chỉ
            function searchAddress() {
                var query = $("#addressSearch").val();
                if (query.length > 2) {
                    $.getJSON('https://esgoo.net/api-timkiemdiachi/1/' + query + '.htm', function (data) {
                        if (data.error == 0) {
                            var suggestions = data.data;
                            var suggestionList = $("#addressSuggestions");
                            suggestionList.empty().show();
                            suggestions.forEach(function (item) {
                                suggestionList.append('<li class="list-group-item" onclick="selectAddress(\'' + item.full_name + '\')">' + item.full_name + '</li>');
                            });
                        }
                    });
                }
                else {
                    $("#addressSuggestions").hide();
                }
            }

            // Hàm chọn địa chỉ
            function selectAddress(address) {
                $("#addressSearch").val(address);
                $("#addressSuggestions").hide();
            }
        });
    </script>
</body>

</html>
